# MTT Kubernetes

## Client

The MTT module primarily provides a kubernetes client which can be used to
interact with a kubernetes cluster.

The client is an extension of the public kubernetes vendor API.

The client is configured by passing the kubeconfig path using the `.args()`
method, which is usually done by a provisioner that has created the resources.

With the plugin configured, you can ask if for the kubernetes API clients as you
would with the common kubernetes vendor SDK.

### Using it

This client is typically generated by asking a provisioner to provide it. The
provisioner will create the plugin already connected to a kubernetes endpoint
and ready to use.

```
logger = logging.getLogger("test_clients")

def test_kubectl_client(provisioner_up):
    """ test if we got a good kubectl client? """

    logger.info("Getting K8s client")
    kubectl_client = provisioner_up.get_client("mtt_kubernetes")

    coreV1 = kubectl_client.get_CoreV1Api_client()
    ns = coreV1.read_namespace(name="kube-system")
    print("NS: {}".format(ns))

    assert ns.metadata.name == "kube-system", "Wrong namespace given"
```

#### Making your own instance

You can make your own instance by passing a proper path to the kube config
file.  The plugin doesn't really use the config much.
